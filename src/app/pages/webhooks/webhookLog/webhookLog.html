<div ng-hide="loadingWebhooks">
    <div ba-panel class="setting-bank-accounts" ba-panel-title="Webhook log" ba-panel-class="light-text with-scroll">
        <table class="table fees-table table-striped setting-bank-accounts-table table-hover">
            <tr class="black-muted-bg divider">
                <th><strong>Event</strong></th>
                <th><strong>URL</strong></th>
                <th><strong>Secret</strong></th>
                <th><strong>Condition</strong></th>
                <th><strong>Tries</strong></th>
                <th><strong>Failed</strong></th>
                <th><strong>Completed</strong></th>
                <th><strong>Updated</strong></th>
                <th><strong>Created</strong></th>
            </tr>
            <tr class="pointer" ng-click="openWebhookLogModal('app/pages/webhooks/webhookLog/webhookLogModal/webhookLogModal.html','md',webhookTask)">
                <td class="table-row-center transactions-list-element" title="{{webhookTask.webhook.event}}" ng-bind="webhookTask.webhook.event | capitalizeDottedSentence"></td>
                <td class="table-row-center transactions-list-element" title="{{webhookTask.webhook.url}}" ng-bind="webhookTask.webhook.url"></td>
                <td class="table-row-center transactions-list-element" title="{{webhookTask.webhook.secret}}" ng-bind="webhookTask.webhook.secret"></td>
                <td class="table-row-center transactions-list-element" title="{{webhookTask.webhook.condition}}" ng-bind="webhookTask.webhook.condition"></td>
                <td class="table-row-center transactions-list-element" title="{{webhookTask.tries}}" ng-bind="webhookTask.tries"></td>
                <td class="table-row-center transactions-list-element" title="{{webhookTask.failed}}" ng-bind="webhookTask.failed"></td>
                <td class="table-row-center transactions-list-element" title="{{webhookTask.completed}}" ng-bind="webhookTask.completed"></td>
                <td class="table-row-center transactions-list-element" title="{{webhookTask.updated | date:'mediumDate'}} {{webhookTask.updated | date:'shortTime'}}">
                    {{webhookTask.updated | date:'mediumDate'}} {{webhookTask.updated | date:'shortTime'}}</td>
                <td class="table-row-center transactions-list-element" title="{{webhookTask.created | date:'mediumDate'}} {{webhookTask.created | date:'shortTime'}}">
                    {{webhookTask.created | date:'mediumDate'}} {{webhookTask.created | date:'shortTime'}}</td>
            </tr>
        </table>
    </div>
</div>
<div ba-panel ng-show="loadingWebhooks">
    <loading-image></loading-image>
</div>
<div ng-hide="loadingRequests">
    <div ng-show="webhookRequests.length > 0" ba-panel class="setting-bank-accounts" ba-panel-title="Webhook requests" ba-panel-class="light-text with-scroll">
        <table class="table fees-table table-striped setting-bank-accounts-table">
            <tr class="black-muted-bg divider">
                <th><strong>Error</strong></th>
                <th><strong>Response code</strong></th>
                <th><strong>Created</strong></th>
            </tr>
            <tr ng-repeat="request in webhookRequests | orderBy: '-created'">
                <td class="table-row-center transactions-list-element" title="{{request.error}}" ng-bind="request.error"></td>
                <td class="table-row-center transactions-list-element" title="{{request.response_code}}" ng-bind="request.response_code"></td>
                <td class="table-row-center transactions-list-element" title="{{request.created | date:'mediumDate'}} {{request.created | date:'shortTime'}}">
                    {{request.created | date:'mediumDate'}} {{request.created | date:'shortTime'}}</td>
            </tr>
        </table>
        <div>
            <p uib-pagination boundary-links="true" items-per-page="pagination.itemsPerPage"  total-items="webhookRequestsData.count" ng-model="pagination.pageNo"
               max-size="pagination.maxSize" class="pagination-sm pull-right transaction-history-pagination" force-ellipses="true" ng-change="getWebhookRequests()"
               previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></p>
        </div>
    </div>
</div>
<div ba-panel ng-show="loadingRequests">
    <loading-image></loading-image>
</div>
